{"ast":null,"code":"(function () {\n  \"use strict\";\n\n  var builder,\n      defaults,\n      escapeCDATA,\n      requiresCDATA,\n      wrapCDATA,\n      hasProp = {}.hasOwnProperty;\n  builder = require('xmlbuilder');\n  defaults = require(\"./defaults\").defaults;\n\n  requiresCDATA = function requiresCDATA(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function wrapCDATA(entry) {\n    return \"<![CDATA[\" + escapeCDATA(entry) + \"]]>\";\n  };\n\n  escapeCDATA = function escapeCDATA(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = function () {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function (rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n\n      if (Object.keys(rootObj).length === 1 && this.options.rootName === defaults['0.2'].rootName) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n\n      render = function (_this) {\n        return function (element, obj) {\n          var attr, child, entry, index, key, value;\n\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n\n          return element;\n        };\n      }(this);\n\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n  }();\n}).call(this);","map":{"version":3,"sources":["/Users/eliothyenne/Daneo/node_modules/react-native-xml2js/lib/builder.js"],"names":["builder","defaults","escapeCDATA","requiresCDATA","wrapCDATA","hasProp","hasOwnProperty","require","entry","indexOf","replace","exports","Builder","opts","key","ref","value","options","call","prototype","buildObject","rootObj","attrkey","charkey","render","rootElement","rootName","Object","keys","length","_this","element","obj","attr","child","index","cdata","raw","txt","att","Array","isArray","ele","up","toString","create","xmldec","doctype","headless","allowSurrogateChars","end","renderOpts"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.11.1\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}